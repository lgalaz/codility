(function() {
  'use strict';

  var flags = function(A){
    var peaks = [], leftIndex, rightIndex, count, maxFlags;

    for (var i = 1; i < A.length-1; i++){
      if( (A[i] > A[i-1]) && ( A[i] > A[i+1] )){
        peaks.push(i);
      }
    }

    if (peaks.length === 0) {
      return 0;
    }

    if (peaks.length === 1) {
      return 1;
    }

    maxFlags = Math.floor(Math.sqrt(A.length)) + 1;

    for (var f = maxFlags; f >= 2; f --) {
      count = 1;
      leftIndex = peaks[0];
      for (var j = 1; j < peaks.length; j++) {
        rightIndex = peaks[j];

        if(Math.abs(rightIndex - leftIndex) >= f) {
          count++;
          leftIndex = rightIndex;
        }

        if(count === f){
          return f;
        }
      }


    }

    return 0;

  }

  //console.log(flags([1,6,1,6,1,6,1]));
  console.log(flags([1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2,1,5,3,4,3,4,1,2,3,7,5,4,3,1,5,7,8,6,7,6,7,4,6,4,5,3,2,4,6,2]));
  // console.log(flags([1,5,3,4,3,4,1,2,3,4,6,2]));

}.call(this));
